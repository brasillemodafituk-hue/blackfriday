<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brasille Moda Fit ‚Ä¢ BLACK FRIDAY</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ===== LIGHTBOX / ZOOM DE IMAGEM ===== */
.lightbox{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.92); z-index:120; padding:min(6vw,24px);
  backdrop-filter: blur(2px);
}
.lightbox.show{ display:grid; }
.lightbox img{
  max-width:100%; max-height:100%;
  object-fit:contain; border-radius:14px;
  touch-action:none;               /* permite arrastar quando zoom */
  transform-origin:center center;
  transition: transform .2s ease;
  box-shadow: 0 20px 60px rgba(0,0,0,.6);
}
.lightbox .lb-close{
  position:fixed; top:12px; right:12px;
  border:none; border-radius:999px; padding:10px 14px;
  font-weight:900; cursor:pointer; z-index:121;
  background:#111; color:#fff; border:1px solid #333;
}
.lightbox .lb-hint{
  position:fixed; bottom:12px; left:50%; transform:translateX(-50%);
  color:#eaeaea; background:rgba(0,0,0,.3);
  padding:8px 12px; border-radius:999px; font-size:12px;
  border:1px solid rgba(255,255,255,.14)
}

    /* ============================
   AJUSTES MOBILE + IMAGENS
   ============================ */

/* Foto em quadro est√°vel (suporte moderno) */
.card .img {
  aspect-ratio: 1 / 1.2;
  background:#0e0e11;
}

.card .img img {
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Fallback para celulares antigos que n√£o suportam aspect-ratio */
@supports not (aspect-ratio: 1 / 1) {
  .card .img { height: 420px; }
  @media (min-width: 768px) {
    .card .img { height: 480px; }
  }
}

/* ============================
   FAB + RESPIRO DO CTA
   ============================ */

/* Respeita a safe-area do iPhone (borda inferior curva) */
.fab {
  bottom: calc(18px + env(safe-area-inset-bottom));
}

/* Impede que o bot√£o ‚ÄúAdicionar ao carrinho‚Äù fique escondido */
.add {
  margin: 12px 14px calc(18px + 64px);
}

/* ============================
   Toques mais responsivos
   ============================ */

button,
.pill,
.add,
.swatch,
.sizes button {
  touch-action: manipulation;
}

/* ============================
   Drawer altura real mobile
   ============================ */

.panel {
  height: 100svh; /* viewport est√°vel */
}

/* ============================
   Sombra leve nas imagens
   ============================ */

.card .img img {
  box-shadow: 0 0 14px rgba(255,105,180,0.12); /* ros√© premium */
}

/* ============================
   (Opcional) Buster de cache
   Imagens sempre atualizando
   ============================ */
/* No JS, use:
const imgUrl = (nomeArquivo) =>
  BASE_IMG + encodeURIComponent(nomeArquivo).replace(/%2520/g, '%20') + '?v=4';
*/

    :root{
      /* Tema BLACK FRIDAY */
      --bg:#0b0b0c;
      --card:#141417;
      --soft:#1a1b1f;
      --muted:#a3a3a3;
      --ink:#f5f5f6;

      /* Rosa e Dourado */
      --pink-200:#ffb3d0; --pink-400:#ff79ae; --pink-600:#ff4d95; --pink-700:#e03580;
      --gold-300:#ffe7a3; --gold-500:#f5c542; --gold-600:#d9a81d;

      --ring:0 0 0 3px rgba(255,77,149,.25);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;}
    body{background:var(--bg);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

    a{color:var(--pink-400);text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:18px}

    /* Header */
    header{
      position:sticky;top:0;z-index:40;
      backdrop-filter:saturate(140%) blur(6px);
      background:linear-gradient(180deg, rgba(20,20,23,.92), rgba(20,20,23,.80));
      border-bottom:1px solid #222;
    }
    .bar{display:flex;align-items:center;gap:14px;justify-content:space-between}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{width:40px;height:40px;border-radius:50%;border:2px solid var(--pink-400);background:#fff}
    .brand{font-weight:800;letter-spacing:.4px}
    .sub{color:var(--muted);font-size:12px}

    .pill{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;border:1px solid #2a2a2f;
      background:linear-gradient(180deg, #1b1b20, #141417);cursor:pointer;font-weight:700;color:var(--ink)}
    .pill:hover{box-shadow:var(--ring)}

    /* Hero BLACK FRIDAY */
    .hero{
      margin:22px 0;border-radius:var(--radius);padding:22px;
      background:radial-gradient(1200px 300px at 10% -40%, rgba(255,77,149,.18), transparent 60%),
                 radial-gradient(800px 240px at 90% -20%, rgba(245,197,66,.20), transparent 60%),
                 linear-gradient(135deg, #151519, #101013);
      border:1px solid #232327;
    }
    .hero h1{margin:0 0 6px;font-size:clamp(24px,3.5vw,36px);letter-spacing:.3px}
    .hero h1 .gold{color:var(--gold-500);text-shadow:0 0 12px rgba(245,197,66,.25)}
    .hero p{margin:0;color:var(--muted)}
    .bf-badge{
      display:inline-block;margin:10px 0 0;padding:6px 12px;border-radius:999px;
      background:linear-gradient(90deg,var(--gold-600),var(--gold-500),var(--gold-300));
      color:#19181b;font-weight:800;letter-spacing:.5px;border:1px solid #3a2d0a
    }

    /* Filtros */
    .filters{display:flex;gap:10px;flex-wrap:wrap;margin:14px 0 18px}
    .filters .pill.active{border-color:var(--pink-600);box-shadow:var(--ring)}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .card{background:var(--card);border:1px solid #232327;border-radius:20px;overflow:hidden;display:flex;flex-direction:column}
    .card .img{position:relative;aspect-ratio:1/1.2;background:#0e0e11}
    .card img{width:100%;height:100%;object-fit:cover;display:block}
    .badge{position:absolute;left:10px;top:10px;background:var(--pink-700);color:#fff;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:800}
    .badge.sale{left:auto;right:10px;background:#111;border:1px solid #333;color:var(--gold-500)}
    .info{padding:14px 14px 8px}
    .name{font-weight:800}
    .price{font-weight:800;color:var(--pink-400)}
    .line{color:#9ca3af;text-decoration:line-through;margin-right:6px}
    .muted{color:var(--muted);font-size:13px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .sizes button,.swatch,.qty{border:1px solid #2a2a30;background:#16161a;color:var(--ink);border-radius:12px;padding:8px 10px;font-weight:700;cursor:pointer}
    .sizes button.active{background:var(--pink-600);color:#fff;border-color:var(--pink-600)}
    .swatch{width:28px;height:28px;border-radius:999px;padding:0;display:inline-flex;align-items:center;justify-content:center}
    .swatch.active{outline:3px solid rgba(255,77,149,.35)}
    .qty{display:flex;align-items:center;gap:10px}
    .qty button{border:none;background:none;font-size:18px;cursor:pointer;color:var(--ink)}
    .add{margin:12px 14px 14px;padding:12px;border:none;border-radius:14px;background:var(--pink-700);color:#fff;font-weight:800;cursor:pointer}
    .add:hover{background:#bd2c6a}

    /* Cart */
    .fab{position:fixed;right:18px;bottom:18px;background:var(--pink-700);color:#fff;border:none;border-radius:999px;padding:14px 18px;font-weight:900;cursor:pointer;box-shadow:0 10px 25px rgba(255,77,149,.35);z-index:50}
    .drawer{position:fixed;inset:0;pointer-events:none;z-index:80}
    .drawer.active{pointer-events:auto}
    .overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);opacity:0;transition:.2s}
    .drawer.active .overlay{opacity:1}
    .panel{
      position:absolute;right:-420px;top:0;height:100svh;width:min(92vw,380px);
      background:#111114;border-left:1px solid #232327;transition:.25s;padding:18px;display:flex;flex-direction:column;gap:12px;overflow:auto;-webkit-overflow-scrolling:touch
    }
    .drawer.active .panel{right:0}
    #cartList{flex:1;overflow:auto;box-shadow: inset 0 10px 14px -12px rgba(0,0,0,.35)}
    .cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;border-bottom:1px dashed #2b2b30;padding:8px 0}
    .cart-item img{width:64px;height:64px;border-radius:12px;object-fit:cover}
    .cart-item .meta{font-size:12.5px;color:#c2c2c2}
    .totals{margin-top:auto;border-top:1px solid #2b2b30;padding-top:10px}
    .cta{display:flex;flex-direction:column;gap:10px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
    .btn{border:none;border-radius:14px;padding:12px 14px;font-weight:900;cursor:pointer}
    .btn.whats{background:#25d366;color:#073b16}
    .btn.mail{background:#000;color:#fff;border:1px solid #333}
    .btn.secondary{background:linear-gradient(90deg, #2b2b31, #1b1b20);color:#e8e8ea;border:1px solid #2a2a30}

    /* Modal cadastro */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);padding:16px;z-index:90}
    .modal.show{display:flex}
    .card-modal{background:#141417;border-radius:20px;max-width:560px;width:100%;padding:18px;border:1px solid #232327;color:var(--ink)}
    .card-modal h3{margin:0 0 8px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .grid2 .full{grid-column:1/-1}
    input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a2a30;background:#0f0f12;color:var(--ink)}
    input:focus,textarea:focus,select:focus{outline:none;box-shadow:var(--ring);border-color:var(--pink-400)}
    .ok{display:none;margin:8px 0 0;padding:10px;border-radius:12px;background:#131215;border:1px solid #2a2a30;color:#c5ffc5;font-weight:700}
    .ok.show{display:block}

    footer{margin:40px 0 80px;color:var(--muted);text-align:center}
  </style>
</head>
<!-- Lightbox de Imagem (expans√£o/zoom) -->
<div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Visualiza√ß√£o da imagem ampliada">
  <button class="lb-close" id="lbClose" aria-label="Fechar">‚úï</button>
  <img id="lightboxImg" alt="Visualiza√ß√£o do produto">
  <div class="lb-hint">Toque duplo para ampliar ‚Ä¢ arraste para mover ‚Ä¢ Esc para fechar</div>
</div>

<body>
  <header>
    <div class="container bar">
      <div class="logo">
        <img src="https://i.imgur.com/0X0L4iQ.png" alt="Brasille">
        <div>
          <div class="brand">Brasille Moda Fit</div>
          <div class="sub">Cat√°logo simples ‚Ä¢ prot√≥tipo</div>
        </div>
      </div>
      <div class="row">
        <a class="pill" id="btnPromo">Promo√ß√µes</a>
        <a class="pill" id="btnContato" href="#">Contato</a>
        <a class="pill" id="btnPolitica" href="#politica">Pol√≠tica</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <span class="bf-badge">BLACK FRIDAY ‚Ä¢ LIMPA ESTOQUE</span>
      <h1><span class="gold">Novidades</span> em rosa ‚Ä¢ conforto & performance</h1>
      <p>Escolha tamanho, cor e adicione ao carrinho. O fechamento √© feito por WhatsApp ou e-mail para confer√™ncia de estoque.</p>
    </section>

    <div class="filters">
      <a class="pill active" id="filtroTodos">Todos</a>
      <a class="pill" id="filtroPromo">Somente Promo√ß√µes</a>
    </div>

    <section id="catalogo" class="grid"></section>
  </main>

  <button class="fab" id="fabCart">üõí Carrinho <span id="fabCount">0</span></button>

  <!-- Drawer Carrinho -->
  <div class="drawer" id="drawer">
    <div class="overlay" id="overlay"></div>
    <aside class="panel">
      <h2 tabindex="-1" style="margin:0;position:sticky;top:0;background:#111114;padding-bottom:8px;z-index:1">Seu carrinho</h2>
      <div id="cartList"></div>
      <div class="totals">
        <div class="row" style="justify-content:space-between">
          <strong>Total</strong>
          <strong id="cartTotal">¬£0.00</strong>
        </div>
      </div>
      <div class="cta">
        <button class="btn secondary" id="btnCadastro">Cadastrar cliente</button>
        <button class="btn whats" id="btnWhats" disabled>Finalizar no WhatsApp</button>
        <button class="btn mail" id="btnEmail" disabled>Enviar pedido por e-mail</button>
      </div>
    </aside>
  </div>

  <!-- Modal Cadastro -->
  <div class="modal" id="modal">
    <div class="card-modal">
      <h3>Cadastro do cliente</h3>
      <p class="muted" style="margin-top:-6px">Usado apenas para montar seu pedido e contato. Sem pagamento online neste prot√≥tipo.</p>
      <div class="grid2">
        <label>Nome
          <input id="c_nome" placeholder="Seu nome" required>
        </label>
        <label>Telefone (WhatsApp)
          <input id="c_tel" placeholder="+44 7448‚Ä¶" required>
        </label>
        <label>E-mail
          <input id="c_email" placeholder="voce@email.com">
        </label>
        <label>CEP / Postcode
          <input id="c_cep" placeholder="N8 ‚Ä¶">
        </label>
        <label class="full">Observa√ß√µes
          <textarea id="c_obs" rows="3" placeholder="Ex.: entregar ap√≥s as 18h"></textarea>
        </label>
      </div>
      <div class="row" style="justify-content:space-between;margin-top:12px">
        <button class="pill" id="fecharModal">Voltar</button>
        <button class="pill" id="salvarCadastro">Salvar cadastro</button>
      </div>
      <div class="ok" id="okMsg">Cadastro salvo com sucesso! üéâ</div>
    </div>
  </div>

  <footer class="container" id="politica">
    <p>Ao enviar o pedido por WhatsApp/E-mail voc√™ concorda com o contato para confirma√ß√£o de estoque e entrega. Sem pagamento online neste site.</p>
    <p>¬© <span id="y"></span> Brasille Moda Fit ‚Äî BLACK FRIDAY.</p>
  </footer>

  <script>
    // ===== CONFIGURA√á√ïES R√ÅPIDAS =====
    const STORE = 
    {
      nome: "Brasille Moda Fit",
      whatsapp: "+447448335013",                 // n√∫mero oficial
      emailPedidos: "brasillemodafituk@gmail.com",
      moeda: "¬£",
      baseImagem: '' // informativo
    };

    // ===== BASE DE IMAGENS =====
    // Op√ß√£o 1 (recomendado no GitHub Pages, mesmo reposit√≥rio):
    const BASE_IMG = './img/';
    // Op√ß√£o 2 (sempre RAW):
    // const BASE_IMG = 'https://raw.githubusercontent.com/GitHubMendes520/Brasille-Moda-Fit/main/img/';

    const imgUrl = (nomeArquivo) => BASE_IMG + encodeURIComponent(nomeArquivo).replace(/%2520/g, '%20');

    // ===== PRODUTOS (com suporte a promo√ß√£o) =====
    const produtos = [
        {
        id: "FIT222",
        nome: "Conjunto VIVA Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Azul", hex: "#1E90FF" }
],
        tamanhos: ["M"],
        imagem: "imagem3.png"
      },
      {
        id: "FIT221",
        nome: "Conjunto VIVA Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Bronze", hex: "#CD7F32" },
],
        tamanhos: ["M"],
        imagem: "imagem4.png"
      },
      {
        id: "FIT222",
        nome: "Conjunto VIVA Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Cinza", hex: "#A9A9A9" },
],
        tamanhos: ["P"],
        imagem: "imagem5.png"
      },
      {
        id: "FIT223",
        nome: "Conjunto VIVA Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Preto", hex: "#111" }
],
        tamanhos: ["P"],
        imagem: "imagem6.png"
      },
      {
        id: "FIT224",
        nome: "Conjunto VIVA Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 2,
        cores: [
  { nome: "Roxo", hex: "#8A2BE2" }
],
        tamanhos: ["P","M"],
        imagem: "imagem7.png"
      },
    {
        id: "FIT226",
        nome: "Conjunto Vitalize Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Cinza", hex: "#A9A9A9" },
],
        tamanhos: ["P"],
        imagem: "imagem9.png"
      },
      {
        id: "FIT227",
        nome: "Conjunto Vitalize Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Roxo", hex: "#8A2BE2" },
],
        tamanhos: ["M",],
        imagem: "imagem10.png"
      },
      {
        id: "FIT228",
        nome: "Conjunto Bella Power Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 34.99,
        promocao: true,
        estoque: 5,
        cores: [
  { nome: "Marrom", hex: "#8B4513" }
],
        tamanhos: ["M"],
        imagem: "imagem11.png"
      },
      {
        id: "FIT229",
        nome: "Conjunto Bella Power Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 34.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Preto", hex: "#111" },
],
        tamanhos: ["P"],
        imagem: "imagem12.png"
      },
      {
        id: "FIT230",
        nome: "Conjunto Bella Power Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 34.99,
        promocao: true,
        estoque: 5,
        cores: [
  { nome: "Azul", hex: "#1E90FF" },
],
        tamanhos: ["M"],
        imagem: "imagem13.png"
      },
      {
        id: "FIT233",
        nome: "Macac√£o Balance Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 45.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 5,
        cores: [
  { nome: "Marsala", hex: "#964F4C" } // Marsala oficial (Pantone 18-1438)
],
        tamanhos: ["M"],
        imagem: "imagem16.png"
      },
     {
        id: "FIT243",
        nome: "Macac√£o Alfa Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 45.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  
  { nome: "Vermelho", hex: "#FF0000" }
],
        tamanhos: ["P"],
        imagem: "imagem27.png"
      },
         {
        id: "FIT243",
        nome: "Macac√£o Alfa Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 45.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Vermelho", hex: "#FF0000" }
],
        tamanhos: ["G"],
        imagem: "imagem26.png"
      },
    
{
        id: "FIT246",
        nome: "Conjunto Atual Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 5,
        cores: [
  { nome: "Vinho", hex: "#8B0000" }
 
],
        tamanhos: ["P"],
        imagem: "imagem30.png"
      },
        {
        id: "FIT247",
        nome: "Conjunto Atual Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 2,
        cores: [
  { nome: "Preto", hex: "#111" },
],
        tamanhos: ["M","G"],
        imagem: "imagem31.png"
      },
          {
        id: "FIT251",
        nome: "Conjunto Vibe Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
  { nome: "Preto", hex: "#111" },
],
        tamanhos: ["M"],
        imagem: "imagem35.png"
      },
       {
        id: "FIT250",
        nome: "Conjunto Vibe Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 45.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 2,
        cores: [
  { nome: "Cinza", hex: "#A9A9A9" },
],
        tamanhos: ["P","G"],
        imagem: "imagem34.png"
      },
      {
        id: "FIT249",
        nome: "Conjunto Vibe Flor Brasil", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 5,
        cores: [
  { nome: "Lavanda", hex: "#E6E6FA" },
],
        tamanhos: ["P"],
        imagem: "imagem33.png"
      },
       {
        id: "FIT255",
        nome: "Conjunto Vibrance Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
    
        { nome: "Verde", hex: "#B6FF42" },
],
        tamanhos: ["M"],
        imagem: "imagem37.png"
      },
      {
        id: "FIT258",
        nome: "Macaquinho Wolf Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
    
        { nome: "Branco", hex: "#FFFFFF" },
],
        tamanhos: ["M"],
        imagem: "imagem38.png"
      },
      {
        id: "FIT257",
        nome: "Conjunto Authentic Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 1,
        cores: [
    
        { nome: "Marrom", hex: "#8B4513" },
],
        tamanhos: ["M"],
        imagem: "imagem39.png"
      },
         {
        id: "FIT256",
        nome: "Conjunto Authentic Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 43.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 2,
        cores: [
    
        { nome: "Preto", hex: "#111" },
],
        tamanhos: ["M"],
        imagem: "imagem40.png"
      },
       {
        id: "FIT250",
        nome: "Conjunto Panther Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [
    
        { nome: "Azul", hex: "#1E90FF" },
],
        tamanhos: ["M"],
        imagem: "imagem41.png"

      },
      {
        id: "FIT252",
        nome: "Conjunto Panther Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [
    
      
      { nome: "Lil√°s", hex: "#C8A2C8" } // lil√°s cl√°ssico
],
        tamanhos: ["M"],
        imagem: "imagem42.png"

      },
      {
        id: "FIT252",
        nome: "Conjunto Panther Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [
    
       { nome: "Cinza", hex: "#A9A9A9" },
],
        tamanhos: ["M"],
        imagem: "imagem43.png"

      },
        {
        id: "FIT252",
        nome: "Conjunto Panther Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [

       { nome: "Preto", hex: "#111" },
],
        tamanhos: ["M"],
        imagem: "imagem44.png"

      },
       {
        id: "FIT252",
        nome: "Conjunto Juicy Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [

      { nome: "Cinza", hex: "#A9A9A9" },
    
],
        tamanhos: ["M"],
        imagem: "imagem45.png"

      },
         {
        id: "FIT252",
        nome: "Conjunto Juicy Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 28.99,
        promocao: true,
        estoque: 2,
        cores: [

    
      { nome: "Azul", hex: "#1E90FF" },
],
        tamanhos: ["M"],
        imagem: "imagem47.png"

      },
      {
        id: "FIT252",
        nome: "Conjunto Shiled Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 2,
        cores: [

    
     { nome: "Vinho", hex: "#8B0000" },
],
        tamanhos: ["M"],
        imagem: "imagem46.png"

      },
       {
        id: "FIT252",
        nome: "Conjunto Shiled Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 1,
        cores: [

    
      { nome: "Vinho", hex: "#8B0000" },
],
        tamanhos: ["G"],
        imagem: "imagem48.png"

      },
          {
        id: "FIT252",
        nome: "Conjunto Shiled Via Mafia", // MENSAGEM DE ULTIMAS UNIDADES
        preco: 40.00,
        precoPromo: 25.99,
        promocao: true,
        estoque: 1,
        cores: [

    
      { nome: "Preto", hex: "#111" },
],
        tamanhos: ["M"],
        imagem: "imagem49.png"

      },
    ];

    // ===== RENDER CAT√ÅLOGO =====
    const elCatalogo = document.querySelector('#catalogo');

    function precoEfetivo(p){ return p.promocao && p.precoPromo ? p.precoPromo : p.preco; }

    function cardProduto(p){
      const wrap = document.createElement('article');
      wrap.className = 'card';
      wrap.innerHTML = `
        <div class="img">
          <img src="${imgUrl(p.imagem)}" alt="${p.nome}">
          <span class="badge">REF ${p.id}</span>
          ${p.promocao ? '<span class="badge sale">SALE</span>' : ''}
        </div>
        <div class="info">
          <div class="name">${p.nome}</div>
          <div class="row" style="justify-content:space-between;margin:6px 0 8px">
            <span class="muted">
              ${p.promocao ? 'Em promo√ß√£o' : 'Dispon√≠vel'}
              ${p.estoque && p.estoque<=5 ? ' ‚Ä¢ <span style="color:#ff8fa3;font-weight:800">√öltimas unidades</span>' : ''}
            </span>
            <span>
              ${p.promocao ? `<span class="line">${STORE.moeda}${p.preco.toFixed(2)}</span>
                               <span class="price">${STORE.moeda}${precoEfetivo(p).toFixed(2)}</span>`
                            : `<span class="price">${STORE.moeda}${p.preco.toFixed(2)}</span>`}
            </span>
          </div>
          <div class="row sizes" data-id="${p.id}">
            ${p.tamanhos.map(t=>`<button data-size="${t}">${t}</button>`).join('')}
          </div>
          <div class="row" style="margin-top:8px" data-id="${p.id}">
            ${p.cores.map(c=>`<button title="${c.nome}" class="swatch" data-color="${c.nome}" style="background:${c.hex}"></button>`).join('')}
          </div>
          <div class="row" style="margin-top:10px">
            <div class="qty" data-id="${p.id}">
              <button class="menos">‚àí</button>
              <span class="q">1</span>
              <button class="mais">+</button>
            </div>
          </div>
        </div>
        <button class="add" data-id="${p.id}">Adicionar ao carrinho</button>
      `;
      return wrap;
    }

    function wireUpCardInteractions(){
      document.querySelectorAll('.sizes').forEach(group=>{
        group.addEventListener('click', e=>{
          if(e.target.tagName!=='BUTTON') return;
          group.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
          e.target.classList.add('active');
        });
      });
      document.querySelectorAll('.swatch').forEach(btn=>{
        btn.addEventListener('click', e=>{
          const parent = e.target.parentElement;
          parent.querySelectorAll('.swatch').forEach(s=>s.classList.remove('active'));
          e.target.classList.add('active');
        });
      });
      document.querySelectorAll('.qty').forEach(box=>{
        box.addEventListener('click', e=>{
          const span = box.querySelector('.q');
          let q = parseInt(span.textContent,10);
          if(e.target.classList.contains('menos')) q = Math.max(1, q-1);
          if(e.target.classList.contains('mais')) q = q+1;
          span.textContent = q;
        });
      });
      document.querySelectorAll('.add').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.dataset.id;
          const card = btn.closest('.card');
          const sizeBtn = card.querySelector('.sizes button.active');
          const colorBtn = card.querySelector('.swatch.active');
          const q = parseInt(card.querySelector('.qty .q').textContent,10);
          if(!sizeBtn || !colorBtn){
            alert('Selecione tamanho e cor antes de adicionar.');
            return;
          }
          const produto = produtos.find(p=>p.id===id);
          const item = {
            id,
            nome: produto.nome,
            preco: precoEfetivo(produto),
            tamanho: sizeBtn.dataset.size,
            cor: colorBtn.dataset.color,
            imagem: imgUrl(produto.imagem),
            q,
            ref: produto.id
          };
          state.cart.push(item);
          renderCart();
          openDrawer();
        })
      });
    }

    function renderCatalogo(filtro='todos'){
      elCatalogo.innerHTML = '';
      const lista = filtro==='promo' ? produtos.filter(p=>p.promocao) : produtos;
      lista.forEach(p => elCatalogo.appendChild(cardProduto(p)));
      wireUpCardInteractions();
      document.querySelector('#filtroTodos').classList.toggle('active', filtro==='todos');
      document.querySelector('#filtroPromo').classList.toggle('active', filtro==='promo');
    }

    // ===== ESTADO / CARRINHO =====
    const state = { cart: [], cadastro: JSON.parse(localStorage.getItem('cadastro')||'null') };
    const money = n => `${STORE.moeda}${n.toFixed(2)}`;

    const drawer = document.querySelector('#drawer');
    const overlay = document.querySelector('#overlay');
    const fab = document.querySelector('#fabCart');
    const fabCount = document.querySelector('#fabCount');

    function openDrawer(){ drawer.classList.add('active'); document.querySelector('.panel h2').focus({preventScroll:true}); }
    function closeDrawer(){ drawer.classList.remove('active'); }
    overlay.addEventListener('click', closeDrawer);
    fab.addEventListener('click', openDrawer);

    function renderCart(){
      const list = document.querySelector('#cartList');
      list.innerHTML = '';
      let total = 0;
      state.cart.forEach((it,idx)=>{
        total += it.preco * it.q;
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img src="${it.imagem}" alt="">
          <div>
            <div style="font-weight:800">${it.nome}</div>
            <div class="meta">Tamanho: ${it.tamanho} ‚Ä¢ Cor: ${it.cor}</div>
            <div class="meta">Qtd: ${it.q} ‚Ä¢ ${money(it.preco)} un.</div>
          </div>
          <button class="pill" data-idx="${idx}">Remover</button>
        `;
        row.querySelector('button').addEventListener('click', (e)=>{
          const i = parseInt(e.target.dataset.idx,10);
          state.cart.splice(i,1); renderCart();
        })
        list.appendChild(row);
      })
      document.querySelector('#cartTotal').textContent = money(total);
      fabCount.textContent = state.cart.reduce((a,b)=>a+b.q,0);
      const enabled = state.cart.length>0 && !!state.cadastro;
      document.querySelector('#btnWhats').disabled = !enabled;
      document.querySelector('#btnEmail').disabled = !enabled;
    }

    // ===== CADASTRO =====
    const modal = document.querySelector('#modal');
    const btnCadastro = document.querySelector('#btnCadastro');
    const btnSalvar = document.querySelector('#salvarCadastro');
    const btnFechar = document.querySelector('#fecharModal');
    const okMsg = document.querySelector('#okMsg');

    function fillCadastro(){
      const c = state.cadastro || {};
      document.querySelector('#c_nome').value = c.nome||'';
      document.querySelector('#c_tel').value = c.tel||'';
      document.querySelector('#c_email').value = c.email||'';
      document.querySelector('#c_cep').value = c.cep||'';
      document.querySelector('#c_obs').value = c.obs||'';
    }

    btnCadastro.addEventListener('click', ()=>{ fillCadastro(); modal.classList.add('show'); });
    btnFechar.addEventListener('click', ()=> modal.classList.remove('show'));
    btnSalvar.addEventListener('click', ()=>{
      const c = {
        nome: document.querySelector('#c_nome').value.trim(),
        tel: document.querySelector('#c_tel').value.trim(),
        email: document.querySelector('#c_email').value.trim(),
        cep: document.querySelector('#c_cep').value.trim(),
        obs: document.querySelector('#c_obs').value.trim()
      };
      if(!c.nome || !c.tel){ alert('Nome e telefone s√£o obrigat√≥rios.'); return; }
      state.cadastro = c; localStorage.setItem('cadastro', JSON.stringify(c));
      okMsg.classList.add('show');
      setTimeout(()=>{ okMsg.classList.remove('show'); modal.classList.remove('show'); renderCart(); }, 800);
    });

    // ===== MENSAGENS =====
    function montarTextoPedido(){
      const linhas = state.cart.map(it=>`‚Ä¢ ${it.nome} (Tam: ${it.tamanho} | Cor: ${it.cor}) x${it.q} ‚Äî ${money(it.preco)} un.`);
      const total = state.cart.reduce((s,it)=> s + it.preco*it.q, 0);
      const c = state.cadastro || {};
      const cab = `${STORE.nome} ‚Äî Pedido via cat√°logo`;
      const cli = `\n\nCliente: ${c.nome}\nWhatsApp: ${c.tel}\nE-mail: ${c.email||'-'}\nCEP/Postcode: ${c.cep||'-'}\nObserva√ß√µes: ${c.obs||'-'}`;
      const rod = `\n\nTotal: ${money(total)}\nRef.: ${Date.now()}`;
      return `${cab}\n\nItens:\n${linhas.join('\n')}${cli}${rod}`;
    }

    document.querySelector('#btnWhats').addEventListener('click', ()=>{
      if(state.cart.length===0 || !state.cadastro) return;
      const texto = encodeURIComponent(montarTextoPedido());
      const url = `https://wa.me/${STORE.whatsapp.replace(/\D/g,'')}?text=${texto}`;
      window.open(url, '_blank');
    });
    document.querySelector('#btnEmail').addEventListener('click', ()=>{
      if(state.cart.length===0 || !state.cadastro) return;
      const assunto = encodeURIComponent(`${STORE.nome} ‚Ä¢ Pedido do cat√°logo`);
      const corpo = encodeURIComponent(montarTextoPedido());
      const url = `mailto:${STORE.emailPedidos}?subject=${assunto}&body=${corpo}`;
      window.location.href = url;
    });

    // ===== FILTROS + DEEP LINK PROMO =====
    document.querySelector('#filtroTodos').addEventListener('click', ()=> renderCatalogo('todos'));
    document.querySelector('#filtroPromo').addEventListener('click', ()=> renderCatalogo('promo'));
    document.querySelector('#btnPromo').addEventListener('click', ()=>{ renderCatalogo('promo'); window.history.replaceState(null,'','?promo=1'); });

    // A√ß√µes r√°pidas
    document.querySelector('#btnContato').href = `https://wa.me/${STORE.whatsapp.replace(/\D/g,'')}`;
    document.querySelector('#y').textContent = new Date().getFullYear();
/* ====== LIGHTBOX / ZOOM ====== */
const lb = document.querySelector('#lightbox');
const lbImg = document.querySelector('#lightboxImg');
const lbClose = document.querySelector('#lbClose');

function openLightbox(src){
  lbImg.src = src;                 // se tiver imagem grande, use data-fullsrc
  lb.classList.add('show');
  document.body.style.overflow = 'hidden';
}
function closeLightbox(){
  lb.classList.remove('show');
  document.body.style.overflow = '';
  resetZoom();
  // evita ‚Äúfantasma‚Äù de imagem carregada
  setTimeout(()=>{ lbImg.src=''; },150);
}

// abre ao clicar na imagem do card
document.querySelector('#catalogo').addEventListener('click', (e)=>{
  const img = e.target.closest('.card .img img');
  if(!img) return;
  // se quiser vers√£o full, use: const full = img.dataset.full || img.src;
  openLightbox(img.src);
});

// fechar (overlay/background)
lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
lbClose.addEventListener('click', closeLightbox);
window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeLightbox(); });

/* ====== ZOOM (duplo toque/click) + PAN (arrastar) ====== */
let scale = 1;
let panX = 0, panY = 0;
let startX = 0, startY = 0;
let panning = false;
function applyTransform(){
  lbImg.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
}
function resetZoom(){
  scale = 1; panX = 0; panY = 0; applyTransform();
}
function toggleZoom(){
  const newScale = (scale === 1 ? 2 : 1);
  scale = newScale;
  // recentra leve ao voltar
  if(scale === 1){ panX = 0; panY = 0; }
  applyTransform();
}
let lastTap = 0;
lbImg.addEventListener('click', (e)=>{
  const now = Date.now();
  if(now - lastTap < 300){ // duplo clique/toque
    toggleZoom();
  }
  lastTap = now;
});

// pan com pointer events (iOS/Android/desktop)
lbImg.addEventListener('pointerdown', (e)=>{
  if(scale === 1) return; // s√≥ arrasta quando estiver ampliado
  panning = true;
  startX = e.clientX - panX;
  startY = e.clientY - panY;
  lbImg.setPointerCapture(e.pointerId);
});
lbImg.addEventListener('pointermove', (e)=>{
  if(!panning || scale === 1) return;
  panX = (e.clientX - startX);
  panY = (e.clientY - startY);
  applyTransform();
});
lbImg.addEventListener('pointerup', ()=>{ panning = false; });
lbImg.addEventListener('pointercancel', ()=>{ panning = false; });

    // Inicializa√ß√£o (lendo ?promo=1)
    const qp = new URLSearchParams(location.search);
    renderCatalogo(qp.get('promo') === '1' ? 'promo' : 'todos');
  </script>
</body>
</html>
